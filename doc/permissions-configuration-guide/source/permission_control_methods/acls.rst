:original_name: obs_40_0005.html

.. _obs_40_0005:

ACLs
====

Access control lists (ACLs) allow resource owners to grant other accounts the access to resources. OBS ACLs define the read and write permissions that are attached to accounts. The permissions granted to an account are also applied to its IAM users. ACLs are not as fine-grained as bucket policies or IAM policies. It is recommended that you use :ref:`IAM permissions <obs_40_0003>` and :ref:`bucket policies <obs_40_0004>` for access control.

By default, only the bucket creator (also the bucket owner) has full control over the bucket, and only the object uploader (also the object owner) has full control over the object. If resource owners want other accounts to access their resources, they can use ACLs to grant the read and write permissions.

Scenarios
---------

You can configure an ACL to:

-  Let another account, rather than you (the object owner), have full control over your object. Suppose you have uploaded object **a** to a bucket of account **B**. By default, account **B** does not have the read and write permissions for your object **a**. In this case, you can set the object ACL to **bucket-owner-full-control** so that account **B** has full control over object **a** and can further manage it in the bucket in a unified manner.
-  Individually control access to a specific object. Suppose you have applied a bucket policy to a set of objects and you want to further control access to a single object in this set of objects. You can use the object ACL to achieve this.

Relationship Between Bucket ACLs and Object ACLs
------------------------------------------------

Both buckets and objects have their own ACL. :ref:`Table 1 <obs_40_0005__table425312218575>` shows the relationship between bucket ACLs and object ACLs.

.. _obs_40_0005__table425312218575:

.. table:: **Table 1** Relationship between bucket ACLs and object ACLs

   +----------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Dimension                                                                  | Bucket ACL                                                                                                                                                                                                                                                                                                                                                                             | Object ACL                                                                                                                                                                             |
   +============================================================================+========================================================================================================================================================================================================================================================================================================================================================================================+========================================================================================================================================================================================+
   | Grantor                                                                    | Bucket owner (the account that created the bucket)                                                                                                                                                                                                                                                                                                                                     | Object owner (the account that uploaded the object, rather than the owner of the bucket that stores the object)                                                                        |
   |                                                                            |                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                        |
   |                                                                            | A bucket owner has full control over the bucket by default. The read and write permissions for the bucket ACL are permanently available to the bucket owner, and cannot be modified. It is not recommended to modify a bucket owner's read and write permissions for the bucket.                                                                                                       | For example, if account **A** uploads object **a** to a bucket of account **B**, the owner of object **a** is account **A**.                                                           |
   |                                                                            |                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                        |
   |                                                                            |                                                                                                                                                                                                                                                                                                                                                                                        | The object owner has full control over the object by default. The read and write permissions for the object ACL are permanently available to the object owner, and cannot be modified. |
   +----------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Grantee <obs_40_0005__table177445813209>`                            | -  Other accounts                                                                                                                                                                                                                                                                                                                                                                      | -  Other accounts                                                                                                                                                                      |
   |                                                                            | -  Anonymous users                                                                                                                                                                                                                                                                                                                                                                     | -  Anonymous users                                                                                                                                                                     |
   |                                                                            | -  Log delivery user groups                                                                                                                                                                                                                                                                                                                                                            |                                                                                                                                                                                        |
   +----------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | :ref:`Permissions that can be granted <obs_40_0005__section1314334415429>` | -  Access to the bucket                                                                                                                                                                                                                                                                                                                                                                | -  Access to the object                                                                                                                                                                |
   |                                                                            | -  Access to the bucket ACL                                                                                                                                                                                                                                                                                                                                                            | -  Access to the object ACL                                                                                                                                                            |
   |                                                                            | -  Whether the bucket ACL applies to its objects                                                                                                                                                                                                                                                                                                                                       | -  Whether the object inherits its bucket's ACL                                                                                                                                        |
   +----------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Inheritance relationship between bucket ACLs and object ACLs               | When an object ACL inherits a bucket ACL, the union of permissions from both ACLs is applied.                                                                                                                                                                                                                                                                                          |                                                                                                                                                                                        |
   |                                                                            |                                                                                                                                                                                                                                                                                                                                                                                        |                                                                                                                                                                                        |
   |                                                                            | -  With the **READ** permission inherited, users granted the **READ** permission in both the bucket ACL and the object ACL can read the object. For example, if the bucket ACL grants anonymous users the read permission and the object ACL grants account **A** the read permission, the final effect is that both anonymous users and account **A** are allowed to read the object. |                                                                                                                                                                                        |
   |                                                                            | -  With the **READ_ACP** permission inherited, users granted the **READ_ACP** permission in both the bucket ACL and the object ACL can read the object ACL.                                                                                                                                                                                                                            |                                                                                                                                                                                        |
   |                                                                            | -  With the **WRITE_ACP** permission inherited, users granted the **WRITE_ACP** permission in both the bucket ACL and the object ACL can update the object ACL.                                                                                                                                                                                                                        |                                                                                                                                                                                        |
   +----------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

Grantee
-------

You can configure an ACL to grant users or user groups listed in :ref:`Table 2 <obs_40_0005__table177445813209>` access to buckets.

.. _obs_40_0005__table177445813209:

.. table:: **Table 2** Users who can be granted bucket access permissions in an ACL

   +-----------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Principal                                                                         | Description                                                                                                                                                                                                                                                                                                                                                                                                                          |
   +===================================================================================+======================================================================================================================================================================================================================================================================================================================================================================================================================================+
   | Other accounts                                                                    | ACLs can be used to grant accounts permissions to access buckets and objects. Once a specific account is granted such permissions, all IAM users under this account have the same permissions as this account.                                                                                                                                                                                                                       |
   |                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                                                                   | If you want to grant different permissions to different IAM users under other accounts, you can configure bucket policies.                                                                                                                                                                                                                                                                                                           |
   |                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                                                                   | .. note::                                                                                                                                                                                                                                                                                                                                                                                                                            |
   |                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                                                                   |    Users must have both the ACL and IAM permissions to access resources across accounts. For details, see :ref:`Which Permissions Apply When They Conflict? <obs_40_0001__section54731919133310>`                                                                                                                                                                                                                                    |
   +-----------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Anonymous users                                                                   | Visitors who have not registered.                                                                                                                                                                                                                                                                                                                                                                                                    |
   |                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                                                                   | .. caution::                                                                                                                                                                                                                                                                                                                                                                                                                         |
   |                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |                                                                                   |    CAUTION:                                                                                                                                                                                                                                                                                                                                                                                                                          |
   |                                                                                   |    If anonymous users are granted the access to a bucket or an object, anyone can access the bucket or the object without authentication.                                                                                                                                                                                                                                                                                            |
   +-----------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Log delivery user groups                                                          | A log delivery user group only delivers access logs of buckets and objects to the configured target bucket. OBS does not create or upload any file to a bucket automatically. Therefore, if you want to record access logs for buckets, you need to grant the permission to a log delivery user group who will deliver the access logs to your specified target bucket. This user group is only used to record internal logs of OBS. |
   |                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   | .. note::                                                                         | .. important::                                                                                                                                                                                                                                                                                                                                                                                                                       |
   |                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                      |
   |    Only the bucket ACL supports authorizing permissions to the log delivery user. |    NOTICE:                                                                                                                                                                                                                                                                                                                                                                                                                           |
   |                                                                                   |    After logging is enabled, the log delivery user will be automatically granted the permission to read the bucket ACL and write the bucket where logs are saved. If you manually disable such permissions, bucket logging fails.                                                                                                                                                                                                    |
   +-----------------------------------------------------------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

.. _obs_40_0005__section1314334415429:

Permissions That Can Be Granted
-------------------------------

:ref:`Table 3 <obs_40_0005__table28226836>` lists the permissions that can be configured in a bucket ACL.

.. _obs_40_0005__table28226836:

.. table:: **Table 3** Bucket ACL permissions

   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------+
   | Permission            | Option                | Description                                                                                            |
   +=======================+=======================+========================================================================================================+
   | Access to bucket      | Read                  | A user with this permission can obtain the list of objects in a bucket and the metadata of the bucket. |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------+
   |                       | Read                  | A user with this permission can obtain the object content and metadata.                                |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------+
   |                       | Write                 | A user with this permission can upload, overwrite, and delete any object in a bucket.                  |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------+
   | Access to ACL         | Read                  | A user with this permission can obtain the ACL of the bucket.                                          |
   |                       |                       |                                                                                                        |
   |                       |                       | The bucket owner has this permission permanently by default.                                           |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------+
   |                       | Write                 | A user with this permission can update the ACL of the bucket.                                          |
   |                       |                       |                                                                                                        |
   |                       |                       | The bucket owner has this permission permanently by default.                                           |
   +-----------------------+-----------------------+--------------------------------------------------------------------------------------------------------+

:ref:`Table 4 <obs_40_0005__table63381242464>` and :ref:`Table 5 <obs_40_0005__table819291414104>` list the permissions that can be configured in an object ACL.

.. _obs_40_0005__table63381242464:

.. table:: **Table 4** Object access permissions

   +------------+-------------------------------------------------------------------------------+
   | Permission | Description                                                                   |
   +============+===============================================================================+
   | Read       | A user with this permission can obtain the content and metadata of an object. |
   +------------+-------------------------------------------------------------------------------+

.. _obs_40_0005__table819291414104:

.. table:: **Table 5** Object ACL access permissions

   ========== ======================================================
   Permission Description
   ========== ======================================================
   Read       A user with this permission can read the object ACL.
   Write      A user with this permission can update the object ACL.
   ========== ======================================================

How Do I Configure an ACL?
--------------------------

You can use the predefined bucket or object ACLs or customize an ACL.

Using Predefined ACLs
---------------------

OBS provides six types of predefined ACLs, as described in :ref:`Table 6 <obs_40_0005__table128816446151>`. A predefined ACL is applied to all users.

.. _obs_40_0005__table128816446151:

.. table:: **Table 6** OBS-predefined ACLs

   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | Predefined ACL                    | Description                                                                                                                                                                                                                                                                                                                                                                    |
   +===================================+================================================================================================================================================================================================================================================================================================================================================================================+
   | private                           | A bucket or an object can only be accessed by its owner.                                                                                                                                                                                                                                                                                                                       |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   | By default, the ACL is set to **private**.                                                                                                                                                                                                                                                                                                                                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | public-read                       | If this permission is set for a bucket, anyone can obtain its object list, multipart tasks, and metadata.                                                                                                                                                                                                                                                                      |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   | If this permission is set for an object, anyone can obtain the content and metadata of the object.                                                                                                                                                                                                                                                                             |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | public-read-write                 | If this permission is set for a bucket, anyone can obtain its object list, multipart upload tasks, and metadata, and can upload, delete objects, initiate multipart uploads, upload, assemble, and copy parts, and cancel multipart uploads.                                                                                                                                   |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   | If this permission is set for an object, anyone can obtain the content and metadata of the object. This permission works the same as **public-read**.                                                                                                                                                                                                                          |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | public-read-delivered             | If this permission is set for a bucket, anyone can obtain its object list, multipart upload tasks, and metadata. Compared with **public-read**, this permission also allows access to the content and metadata of the objects in the bucket.                                                                                                                                   |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   | This permission does not apply to objects.                                                                                                                                                                                                                                                                                                                                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | public-read-write-delivered       | If this permission is set for a bucket, anyone can obtain its object list, multipart upload tasks, and metadata, and can upload, delete objects, initiate multipart uploads, upload, assemble, and copy parts, and cancel multipart uploads. Compared with **public-read-write**, this permission also allows access to the content and metadata of the objects in the bucket. |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   | This permission does not apply to objects.                                                                                                                                                                                                                                                                                                                                     |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
   | bucket-owner-full-control         | Setting this permission for an object will enable the bucket owner to have full control over the object.                                                                                                                                                                                                                                                                       |
   |                                   |                                                                                                                                                                                                                                                                                                                                                                                |
   |                                   | By default, if you upload an object to a bucket of any other user, the bucket owner does not have the access to your object. After you grant the **bucket-owner-full-control** permission to the bucket owner, the bucket owner can have full control over your object.                                                                                                        |
   +-----------------------------------+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

**Using OBS Console to Configure Predefined ACLs**

You can configure predefined ACLs on OBS Console.

-  There are five types of predefined ACLs for buckets.

   In the navigation pane, choose **Bucket ACL**. The bucket ACL configuration page is displayed.

   In the **Public Access** area, **Private** corresponds to the predefined **private** permission, **Public Read** corresponds to the predefined **public-read** permission, and **Public Read/Write** corresponds to the predefined **public-read-write** permission.

   Click **Edit** in the row where **Anonymous User** is located in the **User Access** area.

   -  Select **Read** for **Access to Bucket** and **Read** for **Access to Objects**. This setting corresponds to the **public-read-delivered** permission.
   -  Select both **Read** and **Write** for **Access to Bucket**, and **Read** for **Access to Objects**. This setting corresponds to the **public-read-write-delivered** permission.

-  There are two types of predefined ACLs for objects on OBS Console: **private** and **public-read**. To configure an object ACL on OBS Console, click the object name to go to the object details page and then click the **Object ACL** tab. On the page that is displayed, configure the object ACL.

**Using APIs to Configure Predefined ACLs**

You can use the **x-obs-acl** header to configure the bucket or object ACL when creating a bucket or uploading an object. For details, see `Creating a Bucket <https://docs.otc.t-systems.com/en-us/api/obs/obs_04_0021.html>`__ and `Uploading an Object <https://docs.otc.t-systems.com/en-us/api/obs/obs_04_0080.html>`__. You can also configure the bucket or object ACL after the bucket is created or the object is uploaded. For details, see `Configuring a Bucket ACL <https://docs.otc.t-systems.com/object-storage-service/api-ref/apis/advanced_bucket_settings/configuring_a_bucket_acl.html>`__ and `Configuring an Object ACL <https://docs.otc.t-systems.com/object-storage-service/api-ref/apis/operations_on_objects/configuring_an_object_acl.html>`__.

Customizing an ACL
------------------

You can customize ACLs to grant permissions to specified accounts or anonymous users. :ref:`Table 7 <obs_40_0005__table18882944201515>` lists the permissions that can be configured in bucket or object ACLs.

.. _obs_40_0005__table18882944201515:

.. table:: **Table 7** Permissions that can be configured in bucket or object ACLs

   +--------------+----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+--------------------------+
   | Permission   | When Granted for a Bucket                                                                                                  | When Granted for an Object                                                                                | API Header               |
   +==============+============================================================================================================================+===========================================================================================================+==========================+
   | READ         | A user with this permission can obtain the list of objects in the bucket and the metadata of the bucket.                   | A user with this permission can obtain the content and metadata of the object.                            | x-obs-grant-read         |
   +--------------+----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+--------------------------+
   | WRITE        | A user with this permission can upload objects to the bucket, and can delete and overwrite existing objects in the bucket. | Not supported                                                                                             | x-obs-grant-write        |
   +--------------+----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+--------------------------+
   | READ_ACP     | A user with this permission can read the bucket ACL.                                                                       | A user with this permission can read the object ACL.                                                      | x-obs-grant-read-acp     |
   +--------------+----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+--------------------------+
   | WRITE_ACP    | A user with this permission can update the bucket ACL.                                                                     | A user with this permission can update the object ACL.                                                    | x-obs-grant-write-acp    |
   +--------------+----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+--------------------------+
   | FULL_CONTROL | A user with this permission has the **READ**, **WRITE**, **READ_ACP**, and **WRITE_ACP** permissions.                      | A user with this permission has the **READ**, **READ_ACP**, and **WRITE_ACP** permissions for the object. | x-obs-grant-full-control |
   +--------------+----------------------------------------------------------------------------------------------------------------------------+-----------------------------------------------------------------------------------------------------------+--------------------------+

OBS allows you to customize an object ACL to inherit the bucket ACL. You can use the **x-obs-grant-read-delivered** header to configure a bucket ACL so that grantees can obtain the list of objects in the bucket and the metadata of the bucket, and also have the **READ** permission for objects in the bucket. Using the **x-obs-grant-full-control-delivered** header in a bucket ACL to grant the grantee the **READ**, **WRITE**, **READ_ACP**, and **WRITE_ACP** permissions for the bucket and also the **READ**, **READ_ACP**, and **WRITE_ACP** permissions for the objects in the bucket.

**Using OBS Console to Customize an ACL**

You can customize ACLs on OBS Console.

-  **Bucket ACL**\ **Add**\ **User Access**

   The **Read** and **Write** permissions for **Access to Bucket** correspond to **READ** and **WRITE**, respectively. The **Read** permission for **Access to Objects** indicates that the objects inherit the **READ** permission of the bucket. The **Read** and **Write** permissions for **Access to ACL** correspond to **READ_ACP** and **WRITE_ACP**, respectively.

-  To configure an object ACL on OBS Console, click the object name to go to the object details page. Click the **Object ACL** tab, and click **Add** in the **User Access** area.

   The **Read** permission for **Access to Object** corresponds to **READ**, and the **Read** and **Write** permissions for **Access to ACL** correspond to **READ_ACP** and **WRITE_ACP**, respectively.

-

   -  When creating a bucket or uploading an object, you can use the headers in :ref:`Table 7 <obs_40_0005__table18882944201515>` to configure the bucket or object ACL.
   -  You can also configure an ACL after a bucket is created or an object is uploaded. For details, see `Configuring a Bucket ACL <https://docs.otc.t-systems.com/object-storage-service/api-ref/apis/advanced_bucket_settings/configuring_a_bucket_acl.html>`__ and `Configuring an Object ACL <https://docs.otc.t-systems.com/object-storage-service/api-ref/apis/operations_on_objects/configuring_an_object_acl.html>`__.
